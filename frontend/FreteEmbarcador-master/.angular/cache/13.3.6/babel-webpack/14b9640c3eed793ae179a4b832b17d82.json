{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Validators } from '@angular/forms';\nimport { Component } from '@angular/core';\nlet PrazoEntregaFormComponent = class PrazoEntregaFormComponent {\n  constructor(activatedRoute, fb, notification, router, prazoEntregaService) {\n    this.activatedRoute = activatedRoute;\n    this.fb = fb;\n    this.notification = notification;\n    this.router = router;\n    this.prazoEntregaService = prazoEntregaService;\n    this.title = 'INCLUIR - Prazo de Entrega';\n    this.isTableLoading = false;\n    this.filial = '';\n    this.codTabela = '';\n    this.tipoTabela = '1 - Prazo';\n    this.idaVolta = '2 - Não';\n    this.cidOrigem = '';\n    this.regOrigem = '';\n    this.remetente = '';\n    this.cidDest = '';\n    this.regDest = '';\n    this.destinatario = '';\n    this.tipoOper = '';\n    this.tipoVeiculo = '';\n    this.codGrupo = '';\n    this.transportador = '';\n    this.modal = '1 - Indiferente';\n    this.tipoPrazo = '0 - Dias Uteis';\n    this.prazo = 0;\n    this.prioridade = 0;\n    this.classifFrete = '';\n    this.rotaOrigem = '';\n    this.rotaDestino = '';\n    this.descTpOper = '';\n    this.descTpVeic = '';\n    this.descGrupo = '';\n    this.descTransp = '';\n    this.descClass = '';\n    this.tipoTabelaOpt = [{\n      label: '1 - Prazo',\n      value: '1 - Prazo'\n    }, {\n      label: '2 - Distância',\n      value: '2 - Distância'\n    }];\n    this.idaVoltaOpt = [{\n      label: '1 - Sim',\n      value: '1 - Sim'\n    }, {\n      label: '2 - Não',\n      value: '2 - Não'\n    }];\n    this.modalOpt = [{\n      label: '1 - Indiferente',\n      value: '1 - Indiferente'\n    }, {\n      label: '2 - Rodoviario',\n      value: '2 - Rodoviario'\n    }, {\n      label: '3 - Ferroviario',\n      value: '3 - Ferroviario'\n    }, {\n      label: '4 - Aereo',\n      value: '4 - Aereo'\n    }, {\n      label: '5 - Aquaviario',\n      value: '5 - Aquaviario'\n    }, {\n      label: '6 - Dutoviario',\n      value: '6 - Dutoviario'\n    }, {\n      label: '7 - Multimodal',\n      value: '7 - Multimodal'\n    }];\n    this.tipoPrazoOpt = [{\n      label: '0 - Dias Uteis',\n      value: '0 - Dias Uteis'\n    }, {\n      label: '1 - Dias Corridos',\n      value: '1 - Dias Corridos'\n    }, {\n      label: '2 - Horas',\n      value: '2 - Horas'\n    }]; // ======================================================================================================================\n    // Funções de controle do lookup\n    // ======================================================================================================================\n\n    this.columns = [{\n      property: 'nickname',\n      label: 'Código'\n    }, {\n      property: 'name',\n      label: 'Descrição'\n    }];\n    this.advancedFilters = [{\n      property: 'nickname',\n      divider: 'Selection Informations',\n      optional: true,\n      gridColumns: 6,\n      label: 'Código'\n    }, {\n      property: 'name',\n      optional: true,\n      gridColumns: 6\n    }];\n    const {\n      id\n    } = this.activatedRoute.snapshot.params;\n    this.id = id;\n  }\n\n  ngOnInit() {\n    this.prazoEntregaForm = this.fb.group({\n      filial: [''],\n      codTabela: ['', Validators.required],\n      tipoTabela: ['', Validators.required],\n      iniValidade: ['', Validators.required],\n      fimValidade: ['', Validators.required],\n      idaVolta: [''],\n      cidOrigem: [''],\n      regOrigem: [''],\n      remetente: [''],\n      cidDest: [''],\n      regDest: [''],\n      destinatario: [''],\n      tipoOper: [''],\n      tipoVeiculo: [''],\n      codGrupo: [''],\n      transportador: [''],\n      modal: [''],\n      tipoPrazo: [''],\n      prazo: [''],\n      prioridade: [''],\n      classifFrete: [''],\n      rotaOrigem: [''],\n      rotaDestino: [''],\n      descTpOper: [''],\n      descTpVeic: [''],\n      descGrupo: [''],\n      descTransp: [''],\n      descClass: ['']\n    });\n    this.loadData(this.id);\n  }\n\n  loadData(id) {\n    if (id) {\n      this.prazoEntregaService.get(id).subscribe(prazoEntrega => {\n        this.prazoEntregaForm.patchValue(prazoEntrega);\n        this.title = \"ALTERAR - Prazos de Entrega\";\n      });\n    }\n  }\n\n  cancel() {\n    window.history.back();\n  }\n\n  save() {\n    if (this.prazoEntregaForm.invalid) {\n      this.markAsDirtyInvalidControls(this.prazoEntregaForm.controls);\n      this.notification.warning('Formulário precisa ser preenchido corretamente.');\n      return;\n    }\n\n    const prazoEntrega = this.prazoEntregaForm.value;\n    const operation = !!this.id ? this.prazoEntregaService.update(this.id, prazoEntrega) : this.prazoEntregaService.save(prazoEntrega);\n    const successMessage = !!this.id ? 'Prazo de Entrega atualizado com sucesso' : 'Prazo de Entrega salvo com sucesso';\n    operation.subscribe(() => {\n      this.notification.success(successMessage);\n      this.router.navigate(['app/prazoEntrega']);\n    });\n  }\n\n  markAsDirtyInvalidControls(controls) {\n    for (const key in controls) {\n      if (controls.hasOwnProperty(key)) {\n        const control = controls[key];\n\n        if (control.invalid) {\n          control.markAsDirty();\n        }\n      }\n    }\n  }\n\n  fieldFormat(value) {\n    return `${value.label}`; // `${value.nickname} - ${value.label}`;\n  }\n\n};\nPrazoEntregaFormComponent = __decorate([Component({\n  selector: 'app-prazoEntrega-form',\n  templateUrl: './prazoEntrega-form.component.html',\n  styleUrls: ['./prazoEntrega-form.component.css']\n})], PrazoEntregaFormComponent);\nexport { PrazoEntregaFormComponent };","map":null,"metadata":{},"sourceType":"module"}